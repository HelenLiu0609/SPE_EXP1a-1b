<!DOCTYPE html>
<html>

<head>
    <title>SPE_covid_Questionnaire_Helen Liu</title>
    <!-- 在这里load所有script里需要调用的插件 -->
    <script src="../jspsych.js"></script>
    <script src="../plugins/jspsych-fullscreen.js"></script>
    <script src="../plugins/jspsych-instructions.js"></script>
    <script src="../plugins/jspsych-html-keyboard-response.js"></script>
    <script src="../plugins/jspsych-call-function.js"></script>
    <script src="../plugins/jspsych-html-button-response.js"></script>
    <script src="../plugins/jspsych-image-keyboard-response.js"></script>
    <script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script>
    <!-- survey部分用到的插件 -->
    <script src="../plugins/jspsych-survey-html-form.js"></script>
    <script src="../plugins/jspsych-survey-likert.js"></script>
    <script src="../plugins/jspsych-survey-multi-select.js"></script>
    <script src="../plugins/jspsych-survey-multi-choice.js"></script>
    <link rel="stylesheet" href="../css/jspsych.css">

    <head>
        <style>
            body {
                background-color: rgb(125, 125, 125);
                color: white;
            }
        </style>
    </head>

</head>

<body></body>
<script>
    /* 写在前面 */

    /* 目前待解决问题 */
    //是否需要统一几点评分？
    // likert_trial_self_measurement 项目确认

    /* create timeline */
    var timeline = [];

    // 进入全屏 
    var fullscreen_trial = {
        type: 'fullscreen',
        fullscreen_mode: true,
        message: "<p style = 'color : white'>填写本问卷需要全屏模式</p >",
        button_label: "点击这里进入全屏"
    }
    timeline.push(fullscreen_trial);

    /* define welcome message trial */
    var welcome = {
        type: "html-keyboard-response",
        stimulus: `
   <p>您好，欢迎参与填写本问卷。</p>
   <p>为充分保障您的权利，请确保你已经知晓并同意《参与实验同意书》以及《数据公开知情同意书》。</p>
   <p>如果你未见过上述内容，请咨询实验员。</p>
   <p>果您选择继续，则表示您已经清楚两份知情同意书的内容并同意。</p>
   <p> 按任意键至下页。</p>
   `,
        choices: jsPsych.ALL_KEYS,
    };
    timeline.push(welcome);

    // instruction for information collection
    var instruction_information = {
        type: "html-keyboard-response",
        stimulus: `
   <p>本问卷大约需要xx分钟。共分为4个部分:</p>
   <p>在第一个部分需要您填写一些基本个人信息及家庭信息。</p>
   <p>在第二个部分需要您回答一些新冠疫情防控对您个人的影响的相关问题。</p>
   <p>在第三个部分需要您回答一些政府对于新冠疫情防控对您的影响的相关问题。</p>
   <p>在第四个部分需要您回答一些新冠疫情防控对家庭的影响的相关问题。</p>
   <p>您在本问卷中回答的所有的个人信息和内容将被严格保密。</p>
   <p>本问卷答案没有正确与错误之分，请您基于真实情况作答。</p>
   <p>请按任意键进入第一部分问卷。</p>
   `,
        choices: jsPsych.ALL_KEYS,
    };
    timeline.push(instruction_information);
</script>

<script type="text/javascript">
    /* create timeline */
    var timeline = [];

    /* basic data collection instructions trial 被试基本信息收集 */
    var basic_information_instruction = {
        type: "html-keyboard-response",
        stimulus: `
     <p>本问卷首先需要您填写一些基本个人和家庭相关信息。</p>
     <p>您的个人信息和回答内容将被严格保密。</p>
     <p>请您回答所有的问题。</p>
     <p> 按任意键至下页。</p>
     `,
        choices: jsPsych.ALL_KEYS,
    };
    timeline.push(basic_information_instruction);

    var basic_information = [{
        // 实验被试基本信息收集
        //基本信息（性别、年龄、家庭背景/SES、当前居住地、联系方式）
        type: "survey-html-form",
        preamble: "<p style =' color : white'>你的实验编号是</p>",
        html: function () {
            let data = localStorage.getItem(info["subj_idx"]) ? JSON.parse(localStorage.getItem(info["subj_idx"]))["Name"] : "";
            return "<p><input name='Q0' type='text' value='" + data + "' required/></p>";
        },
        button_label: "继续",
        on_finish: function (data) {
            info["ID"] = data.response.Q0;
        }
    }, {
        type: "html-button-response",
        stimulus: "<p style = 'color : white'>您所居住的城市位于</p>",
        choices: ['农村', '城市'],
        on_finish: function (data) { }
    }, {
        type: "survey-html-form",
        preamble: "<p style =' color : white'>您所居住的城市是</p>",
        html: "<p><input city='Q0' type='text' value='' required/></p>",
        button_label: "继续",
        on_finish: function (data) {

        }
    }, {
        type: "survey-html-form",
        preamble: "<p style =' color : white'>您的职业是</p>",
        html: "<p><input occupation='Q0' type='text' value='' required/></p>",
        button_label: "继续",
        on_finish: function (data) {

        }
    }, {
        type: "survey-html-form",
        preamble: "<p style = 'color : white'>您的教育经历是</p>",
        html: function () {
            return `
                <p><select name="Q0" size=10>
                <option value=1>小学以下</option>
                <option value=2>小学</option>
                <option value=3>初中</option>
                <option value=4>高中</option>
                <option value=5>大学</option>
                <option value=6>硕士</option>
                <option value=7>博士</option>
                <option value=8>其他</option>
                </select></p>`
        },
        button_label: '继续',
        on_finish: function (data) {

        }
    }, {//家庭社会经济地位：在编码时对这些选择分别赋予 1~ 6 的分值。 
        //最后, 把职业等级和受教育程度所得的值加起来, 总分作为家庭 SES 的指标值, 其分布范围在 4~ 22 之间
        type: "survey-html-form",
        preamble: "<p style =' color : white'>您父亲的职业是</p>",
        html: "<p><input father ='Q0' type='text' value='' required/></p>",
        button_label: "继续",
        on_finish: function (data) {

        }
    }, {
        type: "survey-html-form",
        preamble: "<p style = 'color : white'>您父亲的职业是</p>",
        html: function () {
            return `
                <p><select name="Q0" size=10>
                <option value=1>临时工、失业、待业人员、非技术及农业劳动者阶层, 如农民</option>
                <option value=2>体力劳动工人和个体经营人员、技术工及同级工作者, 如建筑工人及相关人员;</option>
                <option value=3>一般管理人员与一般专业技术人员、事务性工作人员, 包括商业服务业员工阶层、办事人员阶层, 如
售货员、司机等;</option>
                <option value=4>中层管理人员与中层专业技术人员、助理专业人员, 包括在各种经济成分的机构( 包括国家机关、党群组织、全民企事业单位、集体企事业单位和各类非公有制经济企业) 中专门从事各种专业性工作和科学技术工作的人员, 如教师、医生、技师等; </option>
                <option value=5>大学</option>
                <option value=6>硕士</option>
                <option value=7>博士</option>
                <option value=8>其他</option>
                </select></p>`
        },
        on_load: function () {
        },
        button_label: '继续',
        on_finish: function (data) {

        }
    }, {
        type: "survey-html-form",
        preamble: "<p style = 'color : white'>您父亲的教育经历是</p>",
        html: function () {
            return `
                <p><select name="Q0" size=10>
                <option value=1>没有上过学</option>
                <option value=2>小学</option>
                <option value=3>初中</option>
                <option value=4>高中或中专</option>
                <option value=5>大学（专科或本科</option>
                <option value=6>研究生及以上</option>
                </select></p>`
        },
        on_load: function () {
        },
        button_label: '继续',
        on_finish: function (data) {

        }
    }, {
        type: "survey-html-form",
        preamble: "<p style = 'color : white'>您母亲的教育经历是</p>",
        html: function () {
            return `
                <p><select name="Q0" size=10>
                <option value=1>没有上过学</option>
                <option value=2>小学</option>
                <option value=3>初中</option>
                <option value=4>高中或中专</option>
                <option value=5>大学（专科或本科</option>
                <option value=6>研究生及以上</option>
                </select></p>`
        },
        on_load: function () {

        },
        button_label: '继续',
        on_finish: function (data) {
        }
    }, {//社会阶级
        type: "instructions",
        pages: ['<img src="img/social.png"></img>' + '<p>想像一下，下图的梯子代表了你所在社会的层级结构。</p><p>等级越高，表示其所处的阶层地位越高。</p>',
            '<p>例如，01 梯子底端代表社会的最底层——他们拥有最少的财富、很少甚至没有受过教育、没有工作或者从事着他人不愿意/不尊重的工作。</p>',
            '<p>10 梯子顶端代表社会的最上层——他们拥有最多的财富、最好的教育和最爱尊重的职业；</p>',
        ],
        show_clickable_nav: true,
        show_page_number: true,
        button_label_previous: '返回',
        button_label_next: '继续',
    }, {
        type: "survey-html-form",
        preamble: "<p style =' color : white'>现在，想想你自己的家庭。请告诉我们，你认为你自己的家庭处在这个梯子的哪个位置？请写下您认为最能代表您家庭在这个梯子上位置的数字。(1-10)</p>",
        html: "<p><input level='Q0' type='text' value='' required/></p>",
        button_label: "继续",
        on_finish: function (data) { }
    },
    ];
    timeline.push({
        timeline: basic_information,
    });


    // 新冠疫情防控对个人的影响
    // 心理健康自评问卷（Self-reporting questionnaires 20）
    //该量表共20个条目，每个条目按照2点计分法，评分标准为：“是”计1分，“否”计0分。以8分为界值，＜8分为无明显应激反应，≥8分为存在应激反应
    var instruction_SRQ_20 = {
        type: "html-keyboard-response",
        stimulus: `
   <p>接下来的几个问题，我们将了解您最近30内的身体健康状况。</p>
   <p>如果您觉得问题适合您的情况，并在过去30天内存在，请回答“是”。</p>
   <p>另一方面，如果问题不适合您的情况或在30天内不存在，请回答“否”。</p>
   <p>本问卷实行匿名制，所有数据只用于统计分析，对有关您的信息保密。请您回答所有的问题。</p>
   <p>按任意键至下页。</p>
   `,
        choices: jsPsych.ALL_KEYS,
    };
    timeline.push(instruction_SRQ_20);

    var SRQ_20 = [{ //心理健康自评问卷//回答前两项者计0分，回答后两项者计1分，总分范围为0-12分，3分为切分值。
        type: "html-button-response",
        stimulus: "<p style = 'color : white'>您是否经常头疼？ </p>",
        choices: ['是', '否'],
        on_finish: function (data) { }
    }, {
        type: "html-button-response",
        stimulus: "<p style = 'color : white'>您是否食欲差？</p>",
        choices: ['是', '否'],
        on_finish: function (data) { }
    }, {
        type: "html-button-response",
        stimulus: "<p style = 'color : white'>您是否睡眠差？ </p>",
        choices: ['是', '否'],
        on_finish: function (data) { }
    }, {
        type: "html-button-response",
        stimulus: "<p style = 'color : white'>您是否易受惊吓？</p>",
        choices: ['是', '否'],
        on_finish: function (data) { }
    }, {
        type: "html-button-response",
        stimulus: "<p style = 'color : white'>您是否手抖？ </p>",
        choices: ['是', '否'],
        on_finish: function (data) { }
    }, {
        type: "html-button-response",
        stimulus: "<p style = 'color : white'>您是否感觉不安、紧张或担忧？</p>",
        choices: ['是', '否'],
        on_finish: function (data) { }
    }, {
        type: "html-button-response",
        stimulus: "<p style = 'color : white'>您是否消化不良？</p>",
        choices: ['是', '否'],
        on_finish: function (data) { }
    }, {
        type: "html-button-response",
        stimulus: "<p style = 'color : white'>您是否思维不清晰？</p>",
        choices: ['是', '否'],
        on_finish: function (data) { }
    }, {
        type: "html-button-response",
        stimulus: "<p style = 'color : white'>您是否感觉不快？</p>",
        choices: ['是', '否'],
        on_finish: function (data) { }
    }, {
        type: "html-button-response",
        stimulus: "<p style = 'color : white'>您是否比原来哭的多？</p>",
        choices: ['是', '否'],
        on_finish: function (data) { }
    }, {
        type: "html-button-response",
        stimulus: "<p style = 'color : white'>您是否发现很难从日常生活中得到乐趣？</p>",
        choices: ['是', '否'],
        on_finish: function (data) { }
    }, {
        type: "html-button-response",
        stimulus: "<p style = 'color : white'>您是否发现自己很难做决定？</p>",
        choices: ['是', '否'],
        on_finish: function (data) { }
    }, {
        type: "html-button-response",
        stimulus: "<p style = 'color : white'>日常工作是否令您感到痛苦？ </p>",
        choices: ['是', '否'],
        on_finish: function (data) { }
    }, {
        type: "html-button-response",
        stimulus: "<p style = 'color : white'>您在生活中是否觉得自己不能起到应起的作用？</p>",
        choices: ['是', '否'],
        on_finish: function (data) { }
    }, {
        type: "html-button-response",
        stimulus: "<p style = 'color : white'>您是否丧失了对事物的乐趣？</p>",
        choices: ['是', '否'],
        on_finish: function (data) { }
    }, {
        type: "html-button-response",
        stimulus: "<p style = 'color : white'>您是否感到自己是个无价值的人?</p>",
        choices: ['是', '否'],
        on_finish: function (data) { }
    }, {
        type: "html-button-response",
        stimulus: "<p style = 'color : white'>您头脑中是否出现过结束自己生命的想法?</p>",
        choices: ['是', '否'],
        on_finish: function (data) { }
    }, {
        type: "html-button-response",
        stimulus: "<p style = 'color : white'>您是否做什么都感到累？</p>",
        choices: ['是', '否'],
        on_finish: function (data) { }
    }, {
        type: "html-button-response",
        stimulus: "<p style = 'color : white'>您是否感到胃部不适？</p>",
        choices: ['是', '否'],
        on_finish: function (data) { }
    }, {
        type: "html-button-response",
        stimulus: "<p style = 'color : white'>您是否容易疲劳？ </p>",
        choices: ['是', '否'],
        on_finish: function (data) { }
    }
    ];
    timeline.push({
        timeline: SRQ_20,
    });

    // Chinese Version of the Fear of COVID-19 Scale
    var instruction_fear_covid_19 = {
        type: "html-keyboard-response",
        stimulus: `
   <p>接下来的几个问题，我们将了解您对新型冠肺炎的感受以及想法。</p>
   <p>这里的问题是针对从2-3周前到现在的状况。</p>
   <p>在以下问题中，请选择最适当的一栏。</p>
   <p>请您回答所有的问题。</p>
   <p>按任意键至下页。</p>
   `,
        choices: jsPsych.ALL_KEYS,
    };
    timeline.push(instruction_fear_covid_19);

    var scale = ["非常不符合", "不符合", "不确定", "符合", "非常符合"];
    //出现问题：继续按钮显示不出来，可改：任意键到下一页
    var likert_trial = { //记分：1-5.A total score is calculated by adding up each item score (ranging from 7 to 35）
        type: 'survey-likert',
        questions: [
            { prompt: "我极其害怕新冠肺炎。", labels: scale, required: true },
            { prompt: "想到新冠肺炎，我会感到不安。", labels: scale, required: true },
            { prompt: "想到新冠肺炎，我会手心出汗。", labels: scale, required: true },
            { prompt: "我害怕因为新冠肺炎而丧命。", labels: scale, required: true },
            { prompt: "在社交媒体上看到新冠肺炎相关的新闻和信息，我会感到紧张或焦虑。", labels: scale, required: true },
            { prompt: "我因为担心感染新冠肺炎而失眠。", labels: scale, required: true },
            { prompt: "想到感染新冠肺炎，我会心跳加速或心悸。", labels: scale, required: true }
        ],
        randomize_question_order: true, //随机呈现
        scale_width: 500
    };

    timeline.push({
        timeline: likert_trial
    });

    // 防疫措施调查问卷个人
    //covid_information_self_measurement

    var instruction_covid_information_self_measurement = {
        type: "html-keyboard-response",
        stimulus: `
   <p>针对目前我国发生的新型冠状病毒感染的肺炎病例，</p>
   <p>为了了解您对相关健康知识的需求，以更好地开展疾病防控，</p>
   <p>现邀请您参加本次调查，请您对下列问题进行1-5点评分（5=总是 ，4=大部分时间是，3=有时是，2=偶尔，1=从来没有）。</p>
   <p>请您回答所有的问题。</p>
   <p>按任意键至下页。</p>
   `,
        choices: jsPsych.ALL_KEYS,
    };
    timeline.push(instruction_covid_information_self_measurement);

    var scale_2 = ["从来没有", "偶尔", "有时是", "大部分时间是", "总是"];//记分：1-5分，得分越高表示个人防护越高
    var likert_trial_1 = {
        type: 'survey-likert',
        questions: [
            { prompt: "为了保护自己与他人，都应该接受接种新型冠状病毒疫苗。", labels: scale_2, required: true },
            { prompt: "您非常关注新型冠状病毒感染的肺炎疫情信息。", labels: scale_2, required: true },
            { prompt: "您非常了解新型冠状病毒的临床症状。", labels: scale_2, required: true },
            { prompt: "您十分了解新型冠状病毒主要传播途径。", labels: scale_2, required: true },
            { prompt: "您打喷嚏和咳嗽时会捂住嘴巴。", labels: scale_2, required: true },
            { prompt: "您与他人用餐时避免共用餐具（例如筷子）。", labels: scale_2, required: true },
            { prompt: "您常用肥皂和清水洗手。", labels: scale_2, required: true },
            { prompt: "您咳嗽、揉鼻子或打喷嚏后立即洗手。", labels: scale_2, required: true },
            { prompt: "无论有无感染症状，您都会戴口罩。", labels: scale_2, required: true },
        ],
        randomize_question_order: true, //随机呈现
        scale_width: 500
    };

    timeline.push({
        timeline: likert_trial_1
    });

    // 政府对于新冠疫情防控对您的影响

    //问卷1:
    //每一陈述都有“是”、“否”两种回答，分别记为1、0，
    //每个被调查者的分数就是各道题回答所得分数的加总，总分越高说明政府的防疫举措越充分，疫情防控对人们的影响越大。
    var instruction_covid_government_self_1 = {
        type: "html-keyboard-response",
        stimulus: `
   <p>请您根据个人经验，对以下问题进行“是”或“否”选择。</p>
   `,
        choices: jsPsych.ALL_KEYS,
    };
    timeline.push(instruction_covid_government_self_1);
    var covid_government_self_1 = [
        {
            type: "html-button-response",
            stimulus: "<p style = 'color : white'>您是否有在酒店或其他隔离点隔离的经历？</p>",
            choices: ['是', '否'],
            on_finish: function (data) { }
        }, {
            type: "html-button-response",
            stimulus: "<p style = 'color : white'>您所在地区是否采取严控出门和定期消毒的疫情防控措施？</p>",
            choices: ['是', '否'],
            on_finish: function (data) { }
        }, {
            type: "html-button-response",
            stimulus: "<p style = 'color : white'>您所在地区是否发放口罩、酒精和消毒液等防疫工具？</p>",
            choices: ['是', '否'],
            on_finish: function (data) { }
        }, {
            type: "html-button-response",
            stimulus: "<p style = 'color : white'>您所在地区是否采取了社区疫情防控知识宣传的疫情防控措施？</p>",
            choices: ['是', '否'],
            on_finish: function (data) { }
        }, {
            type: "html-button-response",
            stimulus: "<p style = 'color : white'>您所在地区是否采取帮忙采购的疫情防控措施？</p>",
            choices: ['是', '否'],
            on_finish: function (data) { }
        }, {
            type: "html-button-response",
            stimulus: "<p style = 'color : white'>您了解的当地政府是否有市场调查与检查的疫情防控工作？</p>",
            choices: ['是', '否'],
            on_finish: function (data) { }
        }, {
            type: "html-button-response",
            stimulus: "<p style = 'color : white'>您了解的当地政府是否有病例通报和流行病调查的疫情防控工作？</p>",
            choices: ['是', '否'],
            on_finish: function (data) { }
        }, {
            type: "html-button-response",
            stimulus: "<p style = 'color : white'>您了解的当地政府是否有密切接触者追踪的疫情防控工作？</p>",
            choices: ['是', '否'],
            on_finish: function (data) { }
        }, {
            type: "html-button-response",
            stimulus: "<p style = 'color : white'>您了解的当地政府是否有启动应急响应和举行疫情防控应急演练的疫情防控工作？</p>",
            choices: ['是', '否'],
            on_finish: function (data) { }
        }, {
            type: "html-button-response",
            stimulus: "<p style = 'color : white'>您了解的当地政府是否有全区核酸检测和宣传教育的疫情防控工作？</p>",
            choices: ['是', '否'],
            on_finish: function (data) { }
        }, {
            type: "html-button-response",
            stimulus: "<p style = 'color : white'>您所在区域是否采取了开展健康教育的措施来防控疫情？</p>",
            choices: ['是', '否'],
            on_finish: function (data) { }
        }, {
            type: "html-button-response",
            stimulus: "<p style = 'color : white'>您所在区域是否有及时采取措施来防控疫情？</p>",
            choices: ['是', '否'],
            on_finish: function (data) { }
        }, {
            type: "html-button-response",
            stimulus: "<p style = 'color : white'>您所在区域是否采取了外来人员进行登记并隔离14天的措施来防控疫情？</p>",
            choices: ['是', '否'],
            on_finish: function (data) { }
        }, {
            type: "html-button-response",
            stimulus: "<p style = 'color : white'>您所在区域是否采取了封锁部分交通，限制出行的措施来防控疫情？</p>",
            choices: ['是', '否'],
            on_finish: function (data) { }
        }, {
            type: "html-button-response",
            stimulus: "<p style = 'color : white'>您所在区域是否采取了出行必须戴口罩，一人一码电子出行的措施来防控疫情？</p>",
            choices: ['是', '否'],
            on_finish: function (data) { }
        },
    ];
    timeline.push({
        timeline: covid_government_self_1,
    });
    //问卷2
    //每一陈述都有从非常同意7到不清楚4到非常不同意1分共七种回答，
    //每个被调查者的态度总分就是他对各道题回答所得分数的加总，
    //总分越高说明政府的防疫举措越充分，疫情防控对人们的影响越大，人们的满意度越高。
    var instruction_covid_government_self_2 = {
        type: "html-keyboard-response",
        stimulus: `
   <p>为了更好地认识和了解抗击疫情对人们生活、经济和健康的影响，我们想了解您所在地区抗击新型冠状病毒期间的相关情况，</p>
   <p>请根据您自己的认知，对下列问题进行1-7点评分（1=非常不同意，4=不清楚，7=非常同意）。</p>
   <p>请您回答所有的问题。</p>
   <p>按任意键至下页。</p>
   `,
        choices: jsPsych.ALL_KEYS,
    };
    timeline.push(instruction_covid_government_self_2);

    var scale_2 = ["非常不同意", "比较不同意", "有些不同意", "不清楚", "有些同意", "比较同意", "非常同意"];
    var likert_trial_2 = {
        type: 'survey-likert',
        questions: [
            { prompt: "您认为您所在地区的疫情防控安全措施实施的情况非常到位。", labels: scale_2, required: true },
            { prompt: "您认为您所在地区的居民对政府号召的响应程度非常好。", labels: scale_2, required: true },
            { prompt: "您认为当地疫情防控工作人员不存在未及时发现感染者或密切接触者，漏报情况的问题。", labels: scale_2, required: true },
            { prompt: "您认为当地疫情防控工作人员不存在瞒报疫情感染者的情况，疫情防控工作重大疏忽的问题。", labels: scale_2, required: true },
            { prompt: "您认为当地疫情防控工作人员不存在疫情防控措施落实力度不够，表面应付而已的问题。", labels: scale_2, required: true },
            { prompt: "您认为当地疫情防控工作人员不存在擅离工作岗位，未能尽职的问题。", labels: scale_2, required: true },
            { prompt: "您认为当地疫情防控工作人员不存在其他突出问题。", labels: scale_2, required: true },
            { prompt: "抗疫之战基本胜利后，您认为出入公共场所还需要测量体温并出示健康码。", labels: scale_2, required: true },
            { prompt: "疫情过后，您认为出门还有必要戴口罩。", labels: scale_2, required: true },
        ],
        randomize_question_order: true, //随机呈现
        scale_width: 500
    };

    timeline.push({
        timeline: likert_trial_2
    });

    //新冠肺炎对家庭生活、经济和健康影响的调查问卷
    //家庭经济基本信息调查
    var instruction_covid_government_family_1 = {
        type: "html-keyboard-response",
        stimulus: `
   <p>为了更好地认识和了解抗击疫情对人们生活、经济和健康的影响，</p>
   <p>我们想了解您的家庭在抗击新型冠状病毒期间的相关情况，</p>
   <p>请根据您自己的认知，在选项中选择您倾向的答案。</p>
   <p>按任意键至下页。</p>
   `,
        choices: jsPsych.ALL_KEYS,
    };
    timeline.push(instruction_covid_government_family_1);

    var family_basic_information = {
        type: 'survey-multi-select',
        questions: [
            {
                prompt: "您家庭的正常月收入范围是？",
                options: ["5000以下", "5000-10000", "10000-15000", "15000以上"],
                horizontal: true,
                required: true,
                name: '月收入'
            },
            {
                prompt: "您的家庭成员人数？",
                options: ["1人", "2-3人", "4人及以上"],
                horizontal: true,
                required: true,
                name: '家庭成员人数'
            },
            {
                prompt: "疫情对您家庭经济影响大吗？",
                options: ["很大", "一般", "较小", "没有影响"],
                horizontal: true,
                required: true,
                name: '疫情影响'
            },
            {
                prompt: "疫情期间您家庭的月收入变化范围？",
                options: ["减少1000元以下", "减少1000-3000元", "减少3000-5000元", "减少5000元以上", "收入增加"],
                horizontal: true,
                required: true,
                name: '月收入变化'
            },
            {
                prompt: "你家庭收入的主要构成？",
                options: ["父母收入", "个人收入", "政府补贴", "股票、基金等投资收入", "其他"],
                horizontal: true,
                required: true,
                name: '家庭收入构成'
            },
            {
                prompt: "疫情结束后，所有人员复工，您的家庭经济恢复状况如何？",
                options: ["全部恢复", "基本恢复", "未恢复"],
                horizontal: true,
                required: true,
                name: '经济恢复'
            }
        ],
        post_trial_gap: 20000,
        randomize_question_order: true
    };
    timeline.push(family_basic_information);

    //家庭健康、生活调查 Part 1
    var covid_information_family_measurement = [
        {
            type: "html-button-response",
            stimulus: "<p style = 'color : white'>疫情防控期间，您是否进行过短暂隔离</p>",
            choices: ['7天以内', '7-14天', '14天以上'],
            on_finish: function (data) { }
        },
    ];
    timeline.push(covid_information_family_measurement);

    var multi_choice_block = {
        type: 'survey-multi-choice',
        questions: [
            { prompt: "疫情期间，是否有亲戚曾经感染过新型冠状病毒？", name: '亲戚', options: ["是", "否"], required: true },
            { prompt: "疫情期间，是否有朋友或同事曾经感染过新型冠状病毒？", name: '朋友或同事', options: ["是", "否"], required: true },
            { prompt: "疫情期间，是否有自己的社区居民曾经感染过新型冠状病毒？", name: '社区居民', options: ["是", "否"], required: true },
            { prompt: "您是否有担心过自己感染新型冠状病毒？", name: '自己', options: ["是", "否"], required: true },
            { prompt: "您是否有担心过自己家人感染新型冠状病毒？", name: '家人', options: ["是", "否"], required: true }
        ]
    };

    // 家庭健康、生活调查 Part 2
    var instruction_covid_information_family_2 = {
        type: "html-keyboard-response",
        stimulus: `
   <p>请根据您自己的认知，对下列问题进行1-7点评分（1=非常不同意，4=不清楚，7=非常同意）。</p>
   <p>请您回答所有的问题。</p>
   <p>按任意键至下页。</p>
   `,
        choices: jsPsych.ALL_KEYS,
    };
    timeline.push(instruction_covid_information_family_2);

    var scale = ["非常不同意", "比较不同意", "有些不同意", "不清楚", "有些同意", "比较同意", "非常同意"];

    var likert_trial_family = { //记分：1-7.A total score is calculated by adding up each item score (ranging from 7 to 49
        type: 'survey-likert',
        questions: [
            { prompt: "您认为待在家里不外出，能够保护自己和家人，避免感染新型冠状病毒。", labels: scale, required: true },
            { prompt: "您认为定期清洁双手和避免接触眼睛、鼻子和嘴巴能够保护自己和家人，避免感染新型冠状病毒。", labels: scale, required: true },
            { prompt: "您认为补充维生素C和喝板蓝根不能保护自己和家人，避免感染新型冠状病毒。", labels: scale, required: true },
            { prompt: "您认为开窗通风和出门戴口罩能够保护自己和家人，避免感染新型冠状病毒。", labels: scale, required: true },
            { prompt: "您认为与他人保持至少1米距离能够保护自己和家人，避免感染新型冠状病毒。", labels: scale, required: true },
            { prompt: "为了防止新型冠状病毒的传播，您和家人有当志愿者，为社会贡献自己的一份力量。", labels: scale, required: true }
        ],
        randomize_question_order: true, //随机呈现
        scale_width: 500
    };

    timeline.push({
        timeline: likert_trial_family,
    });
</script>

<script>
    /*set up finish message*/
    var finish = {
        type: "html-keyboard-response",
        stimulus: `
    <p>感谢您填写本问卷，请按任意键下载cvs，并将下载好的csv发送给研究者。</p>
    <p>请你手动通过 ESC 键退出全屏后关闭本页面。再次感谢您参与填写本问卷！</p>`
    };
    timeline.push(finish);

    /*experiment structure*/
    //实验流程结构 
    var timeline = [];
    timeline.push(fullscreen_trial); //全屏
    timeline.push(welcome); //欢迎
    timeline.push(instruction_information);//基本个人信息填写指导语
    timeline.push({
        timeline: basic_information //被试及其家庭基本信息收集
    });

    //新冠对个人的影响
    timeline.push(instruction_SRQ_20),
        timeline.push({
            timeline: SRQ_20 //WHO心理健康自评问卷（Self-reporting questionnaires 20）

        });
    timeline.push(instruction_fear_covid_19),
        timeline.push(likert_trial), // Chinese Version of the Fear of COVID-19 Scale
        timeline.push(instruction_covid_information_self_measurement),//防疫措施调查问卷个人
        timeline.push(likert_trial_1),

        //政府政策对个人的影响
        timeline.push(instruction_covid_government_self_1),
        timeline.push({
            timeline: covid_government_self_1
        });
    timeline.push(instruction_covid_government_self_2),
        timeline.push(likert_trial_2),
        timeline.push(instruction_covid_government_family_1),

        //新冠对家庭的影响
        timeline.push({    //家庭经济基本信息调查
            timeline: family_basic_information
        });
    timeline.push({
        timeline: covid_information_family_measurement
    });
    timeline.push(multi_choice_block),//家庭健康、生活调查 Part 1
        timeline.push(instruction_covid_information_family_2),
        timeline.push(likert_trial_family), //家庭健康、生活调查 Part 2

        //结束语  
        timeline.push(finish)

    /*start the program*/

    jsPsych.init({
        timeline: timeline,
        on_finish: function () {
            jsPsych.data.get().addToAll(info).localSave("csv", `rawdata_${info["ID"]}_survey_exp1.csv`); //原始数据读取和保存
        }
    });
</script>